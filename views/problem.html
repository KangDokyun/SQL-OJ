<!DOCTYPE html>
<html lang="en">
<head>
    <title><%-title%></title>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery.min.js"></script>
    <!-- Custom Theme files -->
    <!--theme-style-->
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />  
    <!--//theme-style-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="" />
    <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <!---->
    <script src="js/bootstrap.min.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Catamaran:400,100,300,500,700,600,800,900' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
</head>
<body>
 <div class="header head1">
    <div class="container">
        <div class="head-top">
            <div class="logo">
            <a href="/index"><img src="images/bo.png" alt="" title="SQL-OJ"></a>
            </div>
            <div class="login">
                <% if(user==null){ %>
                <ul id='unlogin-area' class="nav-login">
                    <li><a href="#" data-toggle="modal" data-target="#myModal1">Login</a></li>
                    <li><a href="#" data-toggle="modal" data-target="#myModal2">Signup</a></li>
                </ul>
                <% }else{ %>
                <ul id='login-area' class='nav-login'>
                    <li><a id="userinfo">Hello! <%- user.Account%></a></li>
                    <li><a href="/logout" id="logout-btn">Logout</a></li>
                </ul>
                <% } %>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <!-- login -->
    <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content modal-info">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                        
                </div>
                <div class="modal-body modal-spa">
                    <div class="login-grids">

                        <div class="login-right">

                            <h3>Signin with your account </h3>
                            <input id="uname1" type="text" value="Enter your mobile number or Email" name="uname" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Enter your mobile number or Email';}" required="">    
                            <input id="upwd1" type="password" value="Password" name="Password" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Password';}" required="">
                            <input id="login-btn" type="submit" value="SIGNIN" >

                        </div>

                        <p id="login-result"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- //login -->
    <!-- signup -->
    <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content modal-info">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                        
                </div>
                <div class="modal-body modal-spa">
                    <div class="login-grids">

                        <div class="login-right">
                            <h3>Create your account </h3>
                            <input id='uname2' type="text" value="Name" name="Name" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Name';}" required="">   
                            <input id='upwd2' type="password" value="Password" name="Password" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Password';}" required="">    
                            <input id='upwd3' type="password" value="Password" name="Password" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = ' Confirm Your Password';}" required="">  
                            <input id='register-btn' type="submit" value="CREATE ACCOUNT" >
                        </div>

                        <p id='register-result'></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- //signup -->
    
    <div class="nav-top">
        <div class="container">
            <div class="nav1">
                <div class="navbar1">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" >
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>

                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav cl-effect-8">
                            <li><a href="/index">Home </a></li>
                            <li><a href="/problemlist" class="active">Problemlist</a></li>
                            <li><a href="/user">User</a></li>
                            <li><a>Discuss</a></li>
                            <li><a>Reply</a></li>
                        </ul>
                    </div><!-- /.navbar-collapse -->
                </div>
                <!-- start search-->
                <ul class="social-ic">
                    <li><a href="#"><i></i></a></li>
                    <li><a href="#"><i class="ic"></i></a></li>
                    <li><a href="#"><i class="ic1"></i></a></li>
                    <li><a href="#"><i class="ic2"></i></a></li>
                </ul>
                <div class="clearfix"></div>
            </div> 
        </div> 
    </div> 
</div> 
<!-- about -->
<!--content-->
<div class="container">
    <div class="page">
        <div class="typo-head">
            <h3>Problem <%= problem.PID %> : <%= problem.Title.slice(1,-1) %></h3>
        </div>
        <div class="page-header">
            <h3>Description</h3>
        </div>
        <div style="padding-left:200px;padding-right:200px;">
                <h4><%= problem.Detail.slice(1,-1) %></h4>
            </div>
        <div class="page-header">
            <h3>Table Structure</h3>
        </div>
        <div style="padding-left:200px;padding-right:200px;">
            <h4><%= problem.Constructor.slice(1,-1) %></h4>
        </div>


        <% if(sample.length>0){ %>
            <div class="page-header">
                <h3>Samples </h3>
            </div>
            <% for(var i=0;i<sample.length;i++){ %>
            <div class="row">
                <div class="col-sm-2">
                    <h2><span class="label label-success">Sample<%= i+1 %></span></h2>
                </div>
                <div class="col-sm-4">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            <h3 class="panel-title">TestData</h3>
                        </div>
                        <div class="panel-body"><%= sample[i].TestData.slice(1,-1) %></div>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            <h3 class="panel-title">StdOutput</h3>
                        </div>
                        <div class="panel-body"><%= sample[i].StdOutput.slice(1,-1) %></div>
                    </div>
                </div>
                <div class="col-sm-2"></div>
            </div>
            <% } %>
        <% } %>
        <br>
        <br>

        <div id="requestInput">
            <div class="col-sm-2"></div>
            <div class="col-sm-8">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Input Your Code</h3>
                    </div>
                    <div class="panel-body">
                        <textarea type="text" class="form-control" style='font-size:20px; color:#000;' id="usercode" placeholder="请输入你的答案" rows="7"></textarea>
                    </div>
                    <div style='padding-left:15px;padding-right:15px;' >
                        <button type="button" class="btn btn-primary btn-block" id="submit-btn">Submit</button>
                        <br>
                        <div id="resultArea"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<!--footer-->
<div class="footer">
    <div class="container">
        <div class="col-md-6 footer-left">
            <h3>Information</h3>
            <p class="para">这款应用可以帮助SQL学习者进行数据库实例操作练习。更具体地说，这是一款能够提供数据库操作题目，并对用户答案的正确性和效率进行判断的软件系统。除此之外，这款应用还额外提供用户讨论区，使用户能够对难以解答的题目进行讨论学习。</p>
        </div>
        <div class="col-md-6 footer-right">
            <h3>Contact Us</h3>
            <ul class="con-icons">
                <li><span class="glyphicon glyphicon-phone" aria-hidden="true"></span>贝克街-23号（胥雅雯 刘雨瑶 陈明洁）</li>
                <li><a href="mailto:info@example.com"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>694189706@qq.com</a></li>
            </ul>
            <p class="copy-right">Copyright &copy; 2016.Company name All rights reserved.</p>
        </div>
        <div class="clearfix"></div>
    </div>
</div>
<!--//footer-->
<script src="js/jquery.min.js"></script>
<script type="text/javascript">
    $("#submit-btn").bind("click",function(){
        var usercode=$("#usercode").val();
        var data={
            "usercode":usercode
        };
        $.ajax({
            url:"/problem<%=problem.PID%>",
            type:"POST",
            data:data,
            success: function(data){
                $("#resultArea").empty();
                if(data.result=="Accept"){
                    $("#resultArea").append('<div class="alert alert-success" role="alert"><strong>Accept!</strong> You successfully pass this problem.</div>');
                }
                if(data.result=="WrongAns"){
                    $("#resultArea").append('<div class="alert alert-danger" role="alert"><strong>WrongAns!</strong> Change a few things up and try submitting again.</div>');
                }
                if(data.result=="GrammerError"){
                    $("#resultArea").append('<div class="alert alert-warning" role="alert"><strong>GrammerError!</strong> Best check again, there are something illegal</div>');
                }
            }
        })
    })
</script>
</body>
</head>
</html>